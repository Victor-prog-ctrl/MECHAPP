<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <title>Mechapp Â· ConfirmaciÃ³n de pago</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet" />

    <style>
        :root {
            --bg: #0f172a;
            --card: #161a22;
            --muted: #94a3b8;
            --text: #e6e9ef;
            --ok: #22c55e;
            --warn: #f59e0b;
            --err: #ef4444;
            --brand: #f97316;
            ;
            /* acento turquesa suave */
            --ring: rgba(249, 115, 22, .25);
            --shadow: 0 10px 30px rgba(0, 0, 0, .35);
            --radius: 18px;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f7fafc;
                --card: #ffffff;
                --muted: #475569;
                --text: #0f172a;
                --shadow: 0 10px 30px rgba(2, 6, 23, .08);
                --ring: rgba(45, 212, 191, .35);
            }
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: Manrope, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
            background: radial-gradient(1200px 800px at 80% -10%, rgba(45, 212, 191, .08), transparent 60%), var(--bg);
            color: var(--text);
        }

        .container {
            max-width: 920px;
            margin: 32px auto;
            padding: 0 16px;
        }

        /* Header */
        .site-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 0;
            margin-bottom: 12px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text)
        }

        .brand-logo {
            width: 90px;
            height: 90px;
            object-fit: contain
        }

        .brand-name {
            font-weight: 700;
            letter-spacing: .3px;
            font-size: 1.8rem;
            /* antes era ~1.2rem, ahora serÃ¡ mÃ¡s visible */
        }

        /* Card principal */
        .receipt {
            background: var(--card);
            border: 1px solid rgba(148, 163, 184, .12);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .receipt__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 22px 24px;
            border-bottom: 1px dashed rgba(148, 163, 184, .18);
            background: linear-gradient(180deg, rgba(45, 212, 191, .06), transparent);
        }

        .status-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 14px;
            padding: 8px 12px;
            border-radius: 999px;
            letter-spacing: .2px;
            background: rgba(34, 197, 94, .12);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, .25);
        }

        .status-pill.warn {
            background: rgba(245, 158, 11, .12);
            color: #f59e0b;
            border-color: rgba(245, 158, 11, .25);
        }

        .status-pill.err {
            background: rgba(239, 68, 68, .12);
            color: #ef4444;
            border-color: rgba(239, 68, 68, .25);
        }

        .receipt__body {
            display: grid;
            grid-template-columns: 1.2fr .8fr;
            gap: 22px;
            padding: 22px;
        }

        @media (max-width: 840px) {
            .receipt__body {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: linear-gradient(180deg, rgba(148, 163, 184, .04), transparent);
            border: 1px solid rgba(148, 163, 184, .14);
            border-radius: 14px;
            padding: 18px;
        }

        .panel h3 {
            margin: 0 0 10px;
            font-size: 16px;
            letter-spacing: .2px
        }

        .kv {
            display: flex;
            justify-content: space-between;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px dashed rgba(148, 163, 184, .15);
        }

        .kv:last-child {
            border-bottom: 0
        }

        .k {
            color: var(--muted);
            font-size: 13px
        }

        .v {
            font-weight: 600
        }

        .pay-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid rgba(148, 163, 184, .16);
            background: linear-gradient(180deg, rgba(148, 163, 184, .06), transparent);
            font-size: 13px;
            color: var(--muted);
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 0 22px 22px;
            margin-top: 12px;
        }


        .button {
            appearance: none;
            border: 1px solid rgba(148, 163, 184, .18);
            background: transparent;
            color: var(--text);
            padding: 10px 14px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
        }

        .button:hover {
            border-color: var(--ring);
            box-shadow: 0 0 0 6px var(--ring);
        }

        .button.primary {
            background: linear-gradient(180deg, #f97316, #ea580c);
            /* naranja â†’ naranja oscuro */
            color: #fff;
            border-color: transparent;
        }

        .button.ghost {
            background: transparent
        }

        .success-icon {
            width: 22px;
            height: 22px;
            color: #22c55e;
        }

        .muted {
            color: var(--muted)
        }

        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(148, 163, 184, .18), transparent);
            margin: 0 22px;
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="site-header">
            <a class="brand" href="./paginainicio.html">
                <img src="../assets/logo.png" class="brand-logo" alt="Mechapp" />
                <span class="brand-name">Mechapp</span>
            </a>
            <span class="pay-badge">
                <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
                    <path fill="currentColor"
                        d="M10.5 4h6.7c2.3 0 3.2 1.6 2.8 3.4c-.4 1.8-2.1 3.1-4.3 3.1h-2.6l-.5 2.5h2.2c2 0 2.9 1.4 2.6 3c-.3 1.7-1.7 3-3.8 3H8.6l.7-3.6h2.2c.5 0 .9-.3 1-.8l.3-1.4c.1-.5-.3-.9-.8-.9H9.9l1-4.9c.1-.4.5-.7 1-.7Z" />
                </svg>
                Pago procesado por PayPal
            </span>
        </header>

        <section class="receipt" role="status" aria-live="polite">
            <div class="receipt__header">
                <div>
                    <h1 style="margin:0 0 6px;font-size:22px;letter-spacing:.2px;">ConfirmaciÃ³n de pago</h1>
                    <p class="muted" style="margin:0;font-size:14px">Gracias por tu reserva. Te enviamos el comprobante
                        al correo asociado a PayPal.</p>
                </div>
                <div id="statusPill" class="status-pill">
                    <svg class="success-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor" d="m9.55 17.6l-4.6-4.6l1.4-1.4l3.2 3.2l8-8l1.4 1.4z" />
                    </svg>
                    <span id="statusText">Completado</span>
                </div>
            </div>

            <div class="receipt__body">
                <div class="panel">
                    <h3>Resumen de la orden</h3>
                    <div class="kv"><span class="k">Servicio</span><span class="v" id="v-service">â€”</span></div>
                    <div class="kv"><span class="k">Estado</span><span class="v" id="v-status">â€”</span></div>
                    <div class="kv"><span class="k">N.Âº de orden</span><span class="v" id="v-order">â€”</span></div>
                </div>

                <div class="panel">
                    <h3>Pago</h3>
                    <div class="kv"><span class="k">Total</span><span class="v" id="v-amount">â€”</span></div>
                    <div class="kv"><span class="k">MÃ©todo</span><span class="v">PayPal</span></div>
                </div>
            </div>

            <div class="divider"></div>

            <div class="actions">
                <button class="button primary" id="btnVerPerfil">Ver perfil</button>
                <button class="button" id="btnImprimir">Imprimir</button>
                <button class="button ghost" id="btnInicio">Volver al inicio</button>
                <button class="button ghost" id="btnCopiar">Copiar N.Âº de orden</button>
            </div>
        </section>
    </div>

    <script>
        (function () {
            const qs = new URLSearchParams(location.search);
            const order = qs.get('order') || 'â€”';
            const statusRaw = (qs.get('status') || '').toUpperCase();
            const amount = qs.get('amount') || '';
            const currency = qs.get('currency') || 'USD';
            const service = qs.get('service') || 'Servicio MechApp';

            // ðŸŸ  TraducciÃ³n de estado proveniente de PayPal
            const statusMap = {
                'COMPLETED': 'Completado',
                'PENDING': 'Pendiente',
                'APPROVED': 'Aprobado',
                'VOIDED': 'Anulado',
                'REFUNDED': 'Reembolsado'
            };
            const statusTranslated = statusMap[statusRaw] || statusRaw || 'â€”';

            const fmt = (v, c) => {
                const n = Number(v);
                if (Number.isFinite(n)) {
                    try { return new Intl.NumberFormat('en-US', { style: 'currency', currency: c || 'USD' }).format(n); }
                    catch { return (c || 'USD') + ' ' + v; }
                }
                return v ? `${c} ${v}` : 'â€”';
            };

            // ðŸŸ¢ Insertar valores traducidos en la UI
            document.querySelector('#v-service').textContent = service;
            document.querySelector('#v-order').textContent = order;
            document.querySelector('#v-status').textContent = statusTranslated;
            document.querySelector('#v-amount').textContent = fmt(amount, currency);

            // âœ… TraducciÃ³n tambiÃ©n para el "pill" superior
            const pill = document.querySelector('#statusPill');
            const text = document.querySelector('#statusText');
            text.textContent = statusTranslated;

            // Color segÃºn estado
            pill.classList.remove('warn', 'err');
            if (statusRaw === 'COMPLETED') {
                // Verde OK (default)
            } else if (statusRaw === 'PENDING' || statusRaw === 'APPROVED') {
                pill.classList.add('warn');
            } else if (statusRaw) {
                pill.classList.add('err');
            }

            // Botones
            document.querySelector('#btnImprimir').addEventListener('click', () => window.print());
            document.querySelector('#btnInicio').addEventListener('click', () => location.href = './paginainicio.html');
            document.querySelector('#btnVerPerfil').addEventListener('click', () => location.href = './perfil.html');
            document.querySelector('#btnCopiar').addEventListener('click', async () => {
                try { await navigator.clipboard.writeText(order); alert('N.Âº de orden copiado'); }
                catch { alert('No se pudo copiar el N.Âº de orden'); }
            });
        })();
    </script>

</body>

</html>